# tcp/ip 是指利用ip进行通信时所必须用到的协议群的统称,也称网际协议族

# tcp
## 三次握手、四次挥手、挥手时2ml
    time_wait时 2ml原因：
    1.优雅的关闭tcp连接，使被动关闭的一端也可以收到它自己发出去的fin报文的ack报文
    2.避免使用相同四元组的前一个连接报文干扰到后一个连接，等待2msl可以让本次连接的所有报文在网络上消失
    服务器出现大量time_wait如何解决:https://www.jianshu.com/p/a2938fc35573
## tcp长连接和短连接
## 流量控制和网络拥塞控制
    窗口控制：
        问题：每发一个段进行一次确认应答，若包的往返时间较大时，则通信性能较低
        解决：引入窗口，窗口大小就是指无需等待确认应答可以继续发送数据的最大值，这种机制使用了大量的缓冲区，实现对多个段
            同时进行确认应答的功能
        重发控制：会针对当前为止收到数据返回确认应答，当发送端收到某个确认应答后，又连续3次收到同样的确认应答时，则认为数据
            段丢失，进行重发，比起超时机制可提供快速的重发服务
    流量控制：
        问题：当接收端在高负荷情况下，将本应该接受的数据丢弃，导致重传，从而导致网络流量的无端浪费，
        解决：TCP提供一种机制让发送端可以根据接收端实际接收能力控制发送的数据量，具体操作是接收端
            每次在确认应答时告知发送端自己可以接收数据的大小，tcp首部中有字段
    网络拥塞控制：
        问题：有了TCP窗口控制，收发主机之间不再以一个数据段为单位发送确认应答，也可以发送大量数据，
            但在通信开始时发送大量数据，如果网络拥堵，可能会导致整个网络的瘫痪
        解决：慢启动，初始值=3mss，不断增大，发送端取min(拥塞窗口，流量窗口)，当超时重传时，则慢启动阀值设置为3mss，
            若重复确认导致的重传，则设置为当前窗口的一半


# http&https  
## ssl/tls握手过程
    https://www.wosign.com/FAQ/faq2016-0309-04.htm

# http1.0、http1.1、http2.0
    https://mp.weixin.qq.com/s/GICbiyJpINrHZ41u_4zT-A
## 影响http网络请求的因素有：带宽和延迟
## 延迟：建立连接、浏览器阻塞
## http1.0
    设置keep-alive开启长连接，默认一个请求一个连接
## http1.1: 
    默认支持长连接、添加Host头域(ip地址对应多个虚拟主机)、range头域(请求资源的部分)、增加错误状态响应码、缓存处理
## http2.0: 
    多路复用、服务端推送(减少带宽)、头部压缩、新的二进制格式(实现方便且健壮,文本协议考虑场景多，存在缺陷)
    、支持明文传输(但大部分浏览器只支持http2 的https)
## 长连接和多路复用实现方式
    长连接pipeline解决方式：若干个请求排队串行化单线程处理，后面的请求等到前面请求的返回才能执行，前面超时，后续请求则
    阻塞，线头阻塞。
    多路复用：多个请求可同时在一个连接上并行执行，某个请求耗时，不影响其它连接的正常执行
## 长连接和多路复用的好处
    TCP慢启动：tcp连接会随着时间自我调谐，起初会限制连接的最大速度，如果数据传输成功，会随着时间推移提高传输的速度，
    http2让所有数据共用一个tcp连接，可以更有效的使用tcp连接，让高带宽真正服务于http的性能提升
## 头部压缩：
    http2.0维护一个字典，差量更新http头部，大大降低因头部传输产生的流量。。在请求较多时，每个请求都有较多的头部时，需要多消耗带宽
    获取消息头部

# keepalive
## tcp:探测连接的对端是否存活。 
    通过tcp keepalive probe报文，该报文将之前tcp序列号+1，设置一个字节，内容为00的应用层数据，对端若存活，会响应tcp
    keepalive ack报文
## http:长连接，主要是连接复用。
